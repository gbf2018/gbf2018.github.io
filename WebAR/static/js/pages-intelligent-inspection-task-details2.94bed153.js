(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-intelligent-inspection-task-details2"],{"1a74":function(t,a,e){var i=e("372d");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=e("4f06").default;n("1e0794ed",i,!0,{sourceMap:!1,shadowMode:!1})},"1aad":function(t,a,e){"use strict";var i=e("4ea4");Object.defineProperty(a,"__esModule",{value:!0}),a.getPathInfoById=a.saveKeyPointPath=a.getPageKeyPointPath=a.getPathAndKeyPointInfo=a.getPagePathManage=a.getAreaEarthInfoById=a.deleteKeyPoint=a.updateKeyPoint=a.saveKeyPoint=a.getPageKeyPoint=a.getAreaAndKeyPointInfo=a.getPageAreaManage=a.reqUndoneTotal=a.reqTypeList=a.listDict=a.deleteFile=a.completeTask=a.getByTaskDeviceId=a.pageTaskDevice=a.savePatrolEvent=a.getPatrolEventById=a.getPatrolEventInfo=a.getAllPipeCaler=a.getAllPipeTexture=a.getEventContentByTypeId=a.getAllEventType=a.getPatrolEarthInfo=a.taskSave=a.getCoordinateDistance=a.replaceRealPath=a.replacePatrolStatus=a.getById=a.pagePatrolTask=a.getDictionariesByDictType=void 0;var n=i(e("8f19")),o=i(e("4b4b")),s=new n.default;s.setConfig((function(t){return t.baseURL=o.default.appBaseUrl,t}));var r="/app",c="/app/znxj",l=function(t,a){return s.get("".concat(c,"/patrolEvent/getDictionariesByDictType"),t,{Authorization:"Bearer "+a})};a.getDictionariesByDictType=l;var u=function(t,a){return s.get("".concat(c,"/patroltask/pagePatrolTask"),t,{Authorization:"Bearer "+a})};a.pagePatrolTask=u;var d=function(t,a){return s.get("".concat(c,"/patroltask/getById"),t,{Authorization:"Bearer "+a})};a.getById=d;var h=function(t,a){return s.post("".concat(c,"/patroltask/replacePatrolStatus"),t,{"content-type":"application/x-www-form-urlencoded",Authorization:"Bearer "+a})};a.replacePatrolStatus=h;var g=function(t,a){return s.post("".concat(c,"/patroltask/replaceRealPath"),t,{"content-type":"application/x-www-form-urlencoded",Authorization:"Bearer "+a})};a.replaceRealPath=g;var p=function(t,a){return s.get("".concat(c,"/patroltask/getCoordinateDistance"),t,{Authorization:"Bearer "+a})};a.getCoordinateDistance=p;var v=function(t,a){return s.post("".concat(c,"/patrolpoint/save"),t,{"content-type":"application/x-www-form-urlencoded",Authorization:"Bearer "+a})};a.taskSave=v;var f=function(t,a){return s.get("".concat(c,"/patroltask/getPatrolEarthInfo"),t,{Authorization:"Bearer "+a})};a.getPatrolEarthInfo=f;var m=function(t,a){return s.get("".concat(c,"/patrolEvent/getAllEventType"),t,{Authorization:"Bearer "+a})};a.getAllEventType=m;var k=function(t,a){return s.get("".concat(c,"/patrolEvent/getEventContentByTypeId"),t,{Authorization:"Bearer "+a})};a.getEventContentByTypeId=k;var w=function(t,a){return s.get("".concat(c,"/patrolEvent/getAllPipeTexture"),t,{Authorization:"Bearer "+a})};a.getAllPipeTexture=w;var P=function(t,a){return s.get("".concat(c,"/patrolEvent/getAllPipeCaler"),t,{Authorization:"Bearer "+a})};a.getAllPipeCaler=P;var A=function(t,a){return s.get("".concat(c,"/patrolEvent/getPatrolEventInfo"),t,{Authorization:"Bearer "+a})};a.getPatrolEventInfo=A;var y=function(t,a){return s.get("".concat(c,"/patrolEvent/getPatrolEventById"),t,{Authorization:"Bearer "+a})};a.getPatrolEventById=y;var I=function(t,a){return s.post("".concat(c,"/patrolEvent/savePatrolEvent"),t,{"content-type":"application/x-www-form-urlencoded",Authorization:"Bearer "+a})};a.savePatrolEvent=I;var C=function(t,a){return s.get("".concat(c,"/taskdevice/pageTaskDevice"),t,{Authorization:"Bearer "+a})};a.pageTaskDevice=C;var E=function(t,a){return s.get("".concat(c,"/taskdevice/getByTaskDeviceId"),t,{Authorization:"Bearer "+a})};a.getByTaskDeviceId=E;var S=function(t,a){return s.post("".concat(c,"/taskdevice/completeTask"),t,{"content-type":"application/x-www-form-urlencoded",Authorization:"Bearer "+a})};a.completeTask=S;var B=function(t,a){return s.post("".concat(c,"/patrolEvent/deleteFile"),t,{"content-type":"application/x-www-form-urlencoded",Authorization:"Bearer "+a})};a.deleteFile=B;var b=function(t,a){return s.get("".concat(r,"/basic/listDict"),t,{Authorization:"Bearer "+a})};a.listDict=b;var T=function(t,a){return s.get("".concat(c,"/taskdevice/deviceTypeList"),t,{Authorization:"Bearer "+a})};a.reqTypeList=T;var x=function(t){return s.get("".concat(c,"/patroltask/getUndoneTotal"),"",{Authorization:"Bearer "+t})};a.reqUndoneTotal=x;var M=function(t,a){return s.get("".concat(c,"/areaPatrolManage/pageAreaManage"),t,{Authorization:"Bearer "+a})};a.getPageAreaManage=M;var D=function(t,a){return s.get("".concat(c,"/areaPatrolManage/getAreaAndKeyPointInfo"),t,{Authorization:"Bearer "+a})};a.getAreaAndKeyPointInfo=D;var z=function(t,a){return s.get("".concat(c,"/areaPatrolManage/pageKeyPoint"),t,{Authorization:"Bearer "+a})};a.getPageKeyPoint=z;var J=function(t,a){return s.post("".concat(c,"/areaPatrolManage/saveKeyPoint"),t,{"content-type":"application/x-www-form-urlencoded",Authorization:"Bearer "+a})};a.saveKeyPoint=J;var O=function(t,a){return s.post("".concat(c,"/areaPatrolManage/updateKeyPoint"),t,{"content-type":"application/x-www-form-urlencoded",Authorization:"Bearer "+a})};a.updateKeyPoint=O;var R=function(t,a){return s.post("".concat(c,"/areaPatrolManage/deleteKeyPoint"),t,{"content-type":"application/x-www-form-urlencoded",Authorization:"Bearer "+a})};a.deleteKeyPoint=R;var L=function(t,a){return s.get("".concat(c,"/areaPatrolManage/getAreaEarthInfoById"),t,{Authorization:"Bearer "+a})};a.getAreaEarthInfoById=L;var Q=function(t,a){return s.get("".concat(c,"/pathPatrolManage/pagePathManage"),t,{Authorization:"Bearer "+a})};a.getPagePathManage=Q;var H=function(t,a){return s.get("".concat(c,"/pathPatrolManage/getPathAndKeyPointInfo"),t,{Authorization:"Bearer "+a})};a.getPathAndKeyPointInfo=H;var N=function(t,a){return s.get("".concat(c,"/pathPatrolManage/pageKeyPoint"),t,{Authorization:"Bearer "+a})};a.getPageKeyPointPath=N;var K=function(t,a){return s.post("".concat(c,"/pathPatrolManage/saveKeyPoint"),t,{"content-type":"application/x-www-form-urlencoded",Authorization:"Bearer "+a})};a.saveKeyPointPath=K;var Y=function(t,a){return s.get("".concat(c,"/pathPatrolManage/getPathInfoById"),t,{Authorization:"Bearer "+a})};a.getPathInfoById=Y},"1f80":function(t,a,e){t.exports=e.p+"static/img/write.a12578bb.png"},"1f8c":function(t,a,e){t.exports=e.p+"static/img/turn.f9ccc931.png"},"340b":function(t,a,e){t.exports=e.p+"static/img/time.dad033cd.png"},"372d":function(t,a,e){var i=e("24fb");a=i(!1),a.push([t.i,".enter-event[data-v-d0ccaeaa]{position:absolute;width:%?750?%;text-align:center;height:%?100?%;line-height:%?100?%;bottom:0;background-color:#007aff;color:#fff}.write-event[data-v-d0ccaeaa]{position:absolute;right:%?35?%;bottom:%?187?%;width:%?126?%;height:%?126?%;background-color:#4688ff;box-shadow:0 %?6?% %?8?% 0 rgba(69,69,69,.2);border-radius:50%}.my-Iconfont[data-v-d0ccaeaa]{position:fixed;right:%?77?%;bottom:%?231?%;font-size:%?42?%;width:%?41?%;height:%?42?%}.task-wordsStyle[data-v-d0ccaeaa]{font-size:%?36?%;color:#fff}.task-start[data-v-d0ccaeaa]{position:absolute;bottom:0;justify-content:center;align-items:center;width:%?750?%;height:%?98?%;background-color:#2bb364}.task-pause[data-v-d0ccaeaa]{position:absolute;bottom:0;left:0;justify-content:center;align-items:center;width:%?375?%;height:%?98?%;background-color:#4688ff}.task-continue[data-v-d0ccaeaa]{position:absolute;bottom:0;left:0;justify-content:center;align-items:center;width:%?375?%;height:%?98?%;background-color:#2bb364}.task-over[data-v-d0ccaeaa]{position:absolute;bottom:0;right:0;justify-content:center;align-items:center;width:%?375?%;height:%?98?%;background-color:#df2f2d}.showInMarker[data-v-d0ccaeaa]{position:absolute;top:%?465?%;left:%?170?%;width:%?419?%;height:%?265?%;background-color:#000;box-shadow:0 %?1?% %?8?% 0 rgba(0,0,0,.8);opacity:.8;border-radius:%?10?%}.close-icon[data-v-d0ccaeaa]{font-size:%?28?%;width:%?28?%;height:%?28?%;margin-left:%?375?%;margin-top:%?18?%}.in-words[data-v-d0ccaeaa]{flex-direction:row;justify-content:center;margin-top:%?39?%}.in-word1[data-v-d0ccaeaa]{font-size:%?24?%;color:#9c9c9c}.in-word2[data-v-d0ccaeaa]{font-size:%?30?%;color:#fff;margin-top:%?-5?%}.toSave-click[data-v-d0ccaeaa]{flex-direction:row;justify-content:center;align-items:center;width:%?136?%;height:%?47?%;background-color:#4688ff;border-radius:%?10?%;margin-left:%?137?%;margin-top:%?48?%}.clickIcon[data-v-d0ccaeaa]{font-size:%?24?%;width:%?24?%;height:%?20?%}.clickWords[data-v-d0ccaeaa]{font-size:%?24?%;color:#fff;margin-left:%?10?%}.item-message[data-v-d0ccaeaa]{position:absolute;top:-10}.message-button[data-v-d0ccaeaa]{width:%?750?%;height:%?50?%;box-shadow:0 %?6?% %?16?% 0 rgba(75,82,91,.2);border-radius:%?20?%;background-color:#fff;justify-content:center;align-items:center}.center-icon[data-v-d0ccaeaa]{width:%?86?%;height:%?10?%;background-color:#bcc4ca;border-radius:%?5?%;margin-top:%?10?%}.message-message[data-v-d0ccaeaa]{width:%?750?%;height:%?396?%;background-color:#fff;box-shadow:0 %?6?% %?16?% 0 rgba(75,82,91,.2);border-radius:20px;margin-top:%?-20?%;padding-top:%?50?%}.items[data-v-d0ccaeaa]{width:%?680?%;height:%?50?%;padding-left:%?42?%;padding-right:%?48?%;align-items:center;flex-direction:row}.left-name[data-v-d0ccaeaa]{font-size:%?24?%;color:#8e8e8e;margin-right:%?15?%}.middle-word[data-v-d0ccaeaa]{font-size:%?24?%;color:#222}.left-icon[data-v-d0ccaeaa]{font-size:%?24?%;width:%?24?%;height:%?24?%;margin-right:%?16?%}.line[data-v-d0ccaeaa]{width:%?680?%;height:%?2?%;background-color:#dbdbdb;-webkit-transform:scaleY(.5);transform:scaleY(.5);margin-left:%?32?%}.bottom-icons[data-v-d0ccaeaa]{width:%?750?%;height:%?41?%;flex-direction:row;justify-content:center}.bottom-icon[data-v-d0ccaeaa]{width:%?86?%;height:%?10?%;background-color:#bcc4ca;border-radius:5px;margin-top:%?18?%}.marker-modal[data-v-d0ccaeaa]{width:%?514?%;height:%?528?%;background-color:#fff;border-radius:%?20?%}",""]),t.exports=a},"39a2":function(t,a,e){t.exports=e.p+"static/img/user.468518b2.png"},6532:function(t,a,e){"use strict";var i;e.d(a,"b",(function(){return n})),e.d(a,"c",(function(){return o})),e.d(a,"a",(function(){return i}));var n=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("v-uni-view",{staticClass:"task-details relative"},[i("v-uni-map",{ref:"maps",style:{width:"750rpx",height:t.mapHeight+"px"},attrs:{latitude:t.latitude,longitude:t.longitude,markers:t.markers,polyline:t.polyline,polygons:t.polygon,"include-points":t.includePoints,scale:"18","show-location":t.isShowLocation},on:{markertap:function(a){arguments[0]=a=t.$handleEvent(a),t.handleMarkerTap.apply(void 0,arguments)}}},[5!==t.patrolStatus&&1!==t.patrolStatus?i("v-uni-cover-view",{staticClass:"write-event",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.handleEnterEvent.apply(void 0,arguments)}}}):t._e(),5!==t.patrolStatus&&1!==t.patrolStatus?i("v-uni-image",{staticClass:"my-Iconfont",attrs:{src:e("1f80")},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.handleEnterEvent.apply(void 0,arguments)}}}):t._e(),1===t.patrolStatus?i("v-uni-cover-view",{staticClass:"task-start",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.handleStartTask.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"task-wordsStyle"},[t._v("开始巡检")])],1):t._e(),2===t.patrolStatus||4===t.patrolStatus?i("v-uni-cover-view",{staticClass:"task-pause",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.handlePauseTask.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"task-wordsStyle"},[t._v("暂停")])],1):t._e(),3===t.patrolStatus?i("v-uni-cover-view",{staticClass:"task-continue",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.handleContinueTask.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"task-wordsStyle"},[t._v("继续")])],1):t._e(),1!==t.patrolStatus&&5!==t.patrolStatus?i("v-uni-cover-view",{staticClass:"task-over",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.handleOverTask.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"task-wordsStyle"},[t._v("结束")])],1):t._e(),i("v-uni-cover-view",{staticClass:"item-message"},[t.isShow?i("v-uni-view",{staticClass:"message-message"},[i("v-uni-view",{staticClass:"items"},[i("v-uni-view",{staticClass:"left-icons"},[i("v-uni-image",{staticClass:"left-icon",attrs:{src:e("9617")}})],1),i("v-uni-text",{staticClass:"left-name"},[t._v("任务名称:")]),i("v-uni-text",{staticClass:"middle-word"},[t._v(t._s(t.dataList.taskName))])],1),i("v-uni-view",{staticClass:"line"}),i("v-uni-view",{staticClass:"items"},[i("v-uni-view",{staticClass:"left-icons"},[i("v-uni-image",{staticClass:"left-icon",attrs:{src:e("940d")}})],1),i("v-uni-text",{staticClass:"left-name"},[t._v("任务编号:")]),i("v-uni-text",{staticClass:"middle-word"},[t._v(t._s(t.dataList.taskNo))])],1),i("v-uni-view",{staticClass:"line"}),i("v-uni-view",{staticClass:"items"},[i("v-uni-view",{staticClass:"left-icons"},[i("v-uni-image",{staticClass:"left-icon",attrs:{src:e("f09e")}})],1),i("v-uni-text",{staticClass:"left-name"},[t._v("区域和路线名称:")]),i("v-uni-text",{staticClass:"middle-word"},[t._v(t._s(t.dataList.patrolName))])],1),i("v-uni-view",{staticClass:"line"}),i("v-uni-view",{staticClass:"items"},[i("v-uni-view",{staticClass:"left-icons"},[i("v-uni-image",{staticClass:"left-icon",attrs:{src:e("39a2")}})],1),i("v-uni-text",{staticClass:"left-name"},[t._v("巡 检 员:")]),i("v-uni-text",{staticClass:"middle-word"},[t._v(t._s(t.dataList.operatorName))])],1),i("v-uni-view",{staticClass:"line"}),i("v-uni-view",{staticClass:"items"},[i("v-uni-view",{staticClass:"left-icons"},[i("v-uni-image",{staticClass:"left-icon",attrs:{src:e("1f8c")}})],1),i("v-uni-text",{staticClass:"left-name"},[t._v("巡检周期:")]),i("v-uni-text",{staticClass:"middle-word"},[t._v(t._s(t.dataList.planPeriodCn))])],1),i("v-uni-view",{staticClass:"line"}),i("v-uni-view",{staticClass:"items"},[i("v-uni-view",{staticClass:"left-icons"},[i("v-uni-image",{staticClass:"left-icon",attrs:{src:e("340b")}})],1),i("v-uni-text",{staticClass:"left-name"},[t._v("派发时间:")]),i("v-uni-text",{staticClass:"middle-word"},[t._v(t._s(t.dataList.taksTime))])],1),i("v-uni-view",{staticClass:"bottom-icons",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.closeItem.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"bottom-icon"})],1)],1):t._e(),t.isShow?t._e():i("v-uni-view",{staticClass:"message-button",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.showItem.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"center-icon"})],1)],1),t.isInMarker?i("v-uni-cover-view",{staticClass:"showInMarker"},[i("v-uni-image",{staticClass:"close-icon",attrs:{src:e("7b56")},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.handleCloseShowInMarker.apply(void 0,arguments)}}}),i("v-uni-view",{staticClass:"in-words"},[i("v-uni-text",{staticClass:"in-word1"},[t._v("您已进入")]),i("v-uni-text",{staticClass:"in-word2"},[t._v(t._s(t.point.name))]),i("v-uni-text",{staticClass:"in-word1"},[t._v("的范围")])],1),i("v-uni-view",{staticClass:"toSave-click",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.handleMarkerTap.apply(void 0,arguments)}}},[i("v-uni-image",{staticClass:"clickIcon",attrs:{src:e("6ba9")},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.handleCloseShowInMarker.apply(void 0,arguments)}}}),i("v-uni-text",{staticClass:"clickWords"},[t._v("去打卡")])],1)],1):t._e()],1)],1)},o=[]},"6ba9":function(t,a,e){t.exports=e.p+"static/img/goto.6d5e9b39.png"},"7b56":function(t,a){t.exports="data:image/png;base64,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"},"940d":function(t,a,e){t.exports=e.p+"static/img/no.e68af35e.png"},9617:function(t,a,e){t.exports=e.p+"static/img/request.75ab48ce.png"},a478:function(t,a,e){"use strict";e.r(a);var i=e("e862"),n=e.n(i);for(var o in i)"default"!==o&&function(t){e.d(a,t,(function(){return i[t]}))}(o);a["default"]=n.a},b2c6:function(t,a,e){"use strict";var i=e("1a74"),n=e.n(i);n.a},e862:function(t,a,e){"use strict";var i=e("4ea4");e("99af"),e("fb6a"),e("a434"),e("e25e"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=i(e("5530")),o=e("26cb"),s=e("1aad"),r={computed:(0,n.default)({},(0,o.mapState)(["token"])),data:function(){return{latitude:30.17786,longitude:120.220727,mapHeight:600,includePoints:[],markers:[],polyline:[],polygon:[],realPoints:{},patrolStatus:5,patrolTaskId:"",dataList:{request:"asfasfasf"},distancePoints:[],distance:"",drawTime:10,status:"continue",timeID:"",point:{id:1,name:"关键点123",latitude:"",longitude:""},isInMarker:!1,isShow:!1,isShowLocation:!1}},beforeCreate:function(){},onShow:function(){},onLoad:function(t){var a=this;t&&(this.patrolTaskId=parseInt(t.patrolTaskId)),uni.$on("saveCard",(function(){a.handleSave()}));try{var e=uni.getSystemInfoSync();this.mapHeight=e.windowHeight}catch(i){console.log(i)}this.getById(),this.getDistance()},onReady:function(){},onBackPress:function(){},beforeDestroy:function(){clearTimeout(this.timeID),uni.$off(),2!==this.patrolStatus&&4!==this.patrolStatus||this.updatePatrolStatus(3,!0),1!==this.patrolStatus&&3!==this.patrolStatus&&5!==this.patrolStatus&&this.uploadPoints()},methods:{getById:function(){var t=this,a={patrolTaskId:this.patrolTaskId};(0,s.getById)(a,this.token).then((function(a){var e,i;a.code?(e=a.code,i=a.data):(e=a.data.code,i=a.data.data),200===e&&(t.dataList=i,t.patrolStatus=i.patrolStatus,5!==t.patrolStatus?t.isShowLocation=!0:t.isShowLocation=!1,t.getEarthInfo())}))},colorRgba:function(t,a){var e=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/,i=t.toLowerCase();if(i&&e.test(i)){if(4===i.length||5===i.length){for(var n="#",o=1;o<i.length;o+=1)n+=i.slice(o,o+1).concat(i.slice(o,o+1));i=n}9===i.length&&(a=(parseInt("0x"+i.slice(7,9))/255).toFixed(2));var s=[];for(o=1;o<7;o+=2)s.push(parseInt("0x"+i.slice(o,o+2)));return"rgba("+s.join(",")+","+a+")"}return i},getEarthInfo:function(){var t=this,a={patrolTaskId:this.patrolTaskId,categoryName:this.dataList.categoryName};(0,s.getPatrolEarthInfo)(a,this.token).then((function(a){var e,i;if(a.code?(e=a.code,i=a.data):(e=a.data.code,i=a.data.data),200===e){var n=[];if(i.areaEarthInfo){for(var o=i.areaEarthInfo,s={points:[],strokeColor:t.colorRgba(o.areaBorderColor,o.areaBorderPellucidity),fillColor:t.colorRgba(o.areaFillColor,o.areaFillPellucidity)},r=0;r<JSON.parse(o.areaRange).length;r++){var c=JSON.parse(o.areaRange)[r];s.points.push({latitude:c[1],longitude:c[0]}),t.includePoints.push({latitude:c[1],longitude:c[0]})}n.push(s)}t.polygon=n.slice(0);var l=[];if(i.pathEarthInfo){for(var u=i.pathEarthInfo,d={points:[],color:u.pathColor,arrowLine:!1,width:8},h=0;h<JSON.parse(u.pathRange).length;h++){var g=JSON.parse(u.pathRange)[h];d.points.push({latitude:g[1],longitude:g[0]}),t.includePoints.push({latitude:g[1],longitude:g[0]})}l.push(d)}var p=JSON.parse(t.dataList.realPath);if(p&&p.length>0)for(var v=0;v<p.length;v++)l.push({points:p[v],arrowLine:!0,width:8,arrowIconPath:"/static/images/icon_mapAllow.png"});t.polyline=l.slice(0);for(var f=[],m=0;m<i.keyPointInfoList.length;m++){var k=i.keyPointInfoList[m],w={id:k.keyPointId,longitude:JSON.parse(k.keyPointPosition)[0],latitude:JSON.parse(k.keyPointPosition)[1],name:k.keyPointName,time:k.punchClockTime,punchClockStatus:k.punchClockStatus,width:27,height:34.5,anchor:{x:.5,y:1},iconPath:2===k.punchClockStatus?"../../../static/images/nvuemap/clock-finish.png":1===k.punchClockStatus?"../../../static/images/nvuemap/clock-never.png":"../../../static/images/nvuemap/clock-fail.png"};f.push(w),t.includePoints.push({longitude:JSON.parse(k.keyPointPosition)[0],latitude:JSON.parse(k.keyPointPosition)[1]}),2!==k.punchClockStatus&&t.distancePoints.push({id:k.keyPointId,name:k.keyPointName,time:k.punchClockTime,longitude:JSON.parse(k.keyPointPosition)[0],latitude:JSON.parse(k.keyPointPosition)[1],patrolPointId:k.patrolPointId})}if(5===t.patrolStatus&&JSON.parse(t.dataList.realPath).length>0){var P={id:10001,longitude:t.polyline[1].points[0].longitude,latitude:t.polyline[1].points[0].latitude,width:20,height:22,anchor:{x:.5,y:.5},iconPath:"../../../static/images/nvuemap/start.png"},A=t.polyline.length-1,y=t.polyline[t.polyline.length-1].points.length-1,I={id:10001,longitude:t.polyline[A].points[y].longitude,latitude:t.polyline[A].points[y].latitude,width:20,height:22,anchor:{x:.5,y:.5},iconPath:"../../../static/images/nvuemap/end.png"};f.push(P),f.push(I)}t.markers=f.slice(0),t.includePoints=t.includePoints.slice(0)}}))},getDistance:function(){var t=this;(0,s.getCoordinateDistance)({parameterCode:"0022"},this.token).then((function(a){var e,i;a.code?(e=a.code,i=a.data):(e=a.data.code,i=a.data.data),200===e&&(t.distance=parseInt(i.result.parameterValue))})),(0,s.getCoordinateDistance)({parameterCode:"0023"},this.token).then((function(a){var e,i;a.code?(e=a.code,i=a.data):(e=a.data.code,i=a.data.data),200===e&&(t.drawTime=parseInt(i.result.parameterValue))}))},saveLocationAuto:function(){var t=this,a=function a(e){parseInt(t.patrolStatus)%2===0?(e>0&&e%60===0?t.uploadPoints():e>0&&e%30===0?t.drawPoints():e>0&&e%t.drawTime===0?t.savePoints():t.getLocation(),t.judgeDistance(),e+=1,t.timeID=setTimeout((function(){a(e)}),1e3)):clearTimeout(t.timeID)};a(1)},savePoints:function(){var t=this,a=t.status?t.status:"continue";uni.getLocation({type:"gcj02",success:function(e){t.longitude=e.longitude,t.latitude=e.latitude,t.realPoints={longitude:t.longitude,latitude:t.latitude},"continue"===a&&(1===t.polyline.length&&t.polygon.length||t.polyline.length>1)?t.polyline[t.polyline.length-1].points.push(t.realPoints):(t.status="continue",t.polyline.push({points:[{longitude:t.longitude,latitude:t.latitude}],color:"#4688FF",width:8,arrowLine:!0,arrowIconPath:"/static/images/icon_mapAllow.png"}))},fail:function(t){uni.showToast({title:"当前GPS信号弱,位置更新可能会延迟",icon:"none",duration:2e3})}})},drawPoints:function(){var t=this,a=t.status?t.status:"continue";uni.getLocation({type:"gcj02",success:function(e){t.longitude=e.longitude,t.latitude=e.latitude,t.realPoints={longitude:t.longitude,latitude:t.latitude},"continue"===a&&(1===t.polyline.length&&t.polygon.length||t.polyline.length>1)?t.polyline[t.polyline.length-1].points.push(t.realPoints):(t.status="continue",t.polyline.push({points:[{longitude:t.longitude,latitude:t.latitude}],color:"#4688FF",width:8,arrowLine:!0,arrowIconPath:"/static/images/icon_mapAllow.png"})),t.polyline=t.polyline.slice(0)},fail:function(t){uni.showToast({title:"当前GPS信号弱,位置更新可能会延迟",icon:"none",duration:2e3})}})},uploadPoints:function(){this.drawPoints();for(var t="",a=[],e=1;e<this.polyline.length;e++){for(var i=[],n=0;n<this.polyline[e].points.length;n++){var o=this.polyline[e].points[n];i.push({longitude:o.longitude,latitude:o.latitude})}a.push(i)}t=JSON.stringify(a);var r={patrolTaskId:this.patrolTaskId,realPath:t};(0,s.replaceRealPath)(r,this.token).then((function(t){var a,e;t.code?(a=t.code,e=t.data):(a=t.data.code,e=t.data.data),200===a&&(e.result||uni.showToast({title:"上传服务器失败，请重试",icon:"none",duration:2e3}))}))},getLocation:function(){var t=this;uni.getLocation({type:"gcj02",success:function(a){t.longitude=a.longitude,t.latitude=a.latitude},fail:function(t){uni.showToast({title:"当前GPS信号弱,位置更新可能会延迟",icon:"none",duration:2e3})}})},judgeDistance:function(){if(this.distance)for(var t=0;t<this.distancePoints.length;t++){var a=this.distancePoints[t],e=a.longitude,i=a.latitude,n=this.getNowDistance(this.latitude,this.longitude,i,e);if(n<this.distance)return this.distancePoints.splice(t,1),void this.showClickPoint(a)}},getNowDistance:function(t,a,e,i){t=this.ConvertDegreesToRadians(t),a=this.ConvertDegreesToRadians(a),e=this.ConvertDegreesToRadians(e),i=this.ConvertDegreesToRadians(i);var n=6378200,o=Math.abs(a-i),s=Math.abs(t-e),r=this.HaverSin(s)+Math.cos(t)*Math.cos(e)*this.HaverSin(o),c=2*n*Math.asin(Math.sqrt(r));return c},ConvertDegreesToRadians:function(t){return t*Math.PI/180},HaverSin:function(t){var a=Math.sin(t/2);return a*a},showClickPoint:function(t){this.point=t,this.isInMarker=!0},handleCloseShowInMarker:function(){this.isInMarker=!1},handleMarkerTap:function(t){var a=this;if(5!==this.patrolStatus)if(3!==this.patrolStatus)if("{}"===JSON.stringify(t.detail)){this.isInMarker=!1;var e=uni.getSubNVueById("markerModal");e.show("auto",300,(function(){uni.$emit("showModal",{isInMarker:!0,hasSaved:!1,markerName:a.point.name,saveTime:a.point.time})}))}else{for(var i=t.detail.markerId,n=0;n<this.markers.length;n++)this.markers[n].id===i&&(this.point=this.markers[n]);var o=!1,s=2===this.point.punchClockStatus,r=this.getNowDistance(this.latitude,this.longitude,this.point.latitude,this.point.longitude);r<this.distance&&(o=!0);var c=uni.getSubNVueById("markerModal");c.show("auto",300,(function(){uni.$emit("showModal",{isInMarker:o,hasSaved:s,markerName:a.point.name,saveTime:a.point.time})}))}else uni.showToast({title:"暂停状态不允许打卡",icon:"none",duration:2e3})},handleSave:function(){var t=this,a={patrolPointId:this.point.patrolPointId,partolAddr:this.point.name,longitude:this.point.longitude,latitude:this.point.latitude};(0,s.taskSave)(a,this.token).then((function(e){var i,n;if(console.log("打卡",a,e),e.code?(i=e.code,n=e.data):(i=e.data.code,n=e.data.data),200===i)if(n.result){for(var o=0;o<t.markers.length;o++)t.markers[o].id===t.point.id&&(t.markers[o].punchClockStatus=2,t.markers[o].iconPath="../../../static/images/nvuemap/clock-finish.png");t.markers=t.markers.slice(0),uni.$emit("saveCardOver")}else uni.showToast({title:"打卡失败，请重试",icon:"none",duration:2e3})}))},updatePatrolStatus:function(t,a){var e=this,i={patrolTaskId:this.patrolTaskId,patrolStatus:t};(0,s.replacePatrolStatus)(i,this.token).then((function(i){var n,o;if(console.log("更新巡检状态",i),i.code?(n=i.code,o=i.data):(n=i.data.code,o=i.data.data),200===n)if(o.result){if(a)return;e.patrolStatus=t,2===t?(e.status="continue",e.saveLocationAuto()):3===t?e.uploadPoints():4===t?(e.status="break",e.saveLocationAuto()):5===t&&(e.uploadPoints(),e.drawStartandEnd())}else uni.showToast({title:"更新巡检状态失败，请重试",icon:"none",duration:2e3})}))},drawStartandEnd:function(){if(this.polyline.length>1){var t={id:10001,longitude:this.polyline[1].points[0].longitude,latitude:this.polyline[1].points[0].latitude,width:20,height:22,anchor:{x:.5,y:.5},iconPath:"../../../static/images/nvuemap/start.png"},a=this.polyline.length-1,e=this.polyline[this.polyline.length-1].points.length-1,i={id:10001,longitude:this.polyline[a].points[e].longitude,latitude:this.polyline[a].points[e].latitude,width:20,height:22,anchor:{x:.5,y:.5},iconPath:"../../../static/images/nvuemap/end.png"};this.markers.push(t),this.markers.push(i),this.markers=this.markers.slice(0)}},handleStartTask:function(){this.updatePatrolStatus(2)},handlePauseTask:function(){this.updatePatrolStatus(3)},handleContinueTask:function(){this.updatePatrolStatus(4)},handleOverTask:function(){for(var t=this,a=!0,e=0;e<this.markers.length;e++)2!==this.markers[e].punchClockStatus&&(a=!1);a?this.updatePatrolStatus(5):uni.showModal({title:"提示",content:"您当前还有未打卡的点，是否确认结束巡检",success:function(a){if(a.confirm)t.updatePatrolStatus(5);else if(a.cancel)return}})},handleEnterEvent:function(){var t={patrolTaskId:this.patrolTaskId,longitude:this.longitude,latitude:this.latitude};uni.navigateTo({url:"enter-event?taskItem="+encodeURIComponent(JSON.stringify(t))})},showItem:function(){this.isShow=!0},closeItem:function(){this.isShow=!1}},mounted:function(){}};a.default=r},f09e:function(t,a,e){t.exports=e.p+"static/img/address.b5e36210.png"},fbd3:function(t,a,e){"use strict";e.r(a);var i=e("6532"),n=e("a478");for(var o in n)"default"!==o&&function(t){e.d(a,t,(function(){return n[t]}))}(o);e("b2c6");var s,r=e("f0c5"),c=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,"d0ccaeaa",null,!1,i["a"],s);a["default"]=c.exports}}]);